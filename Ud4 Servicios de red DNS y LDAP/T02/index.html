
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://laura-agut.github.io/Despliegue/Ud4%20Servicios%20de%20red%20DNS%20y%20LDAP/T02/">
      
      
        <link rel="prev" href="../T01/">
      
      
        <link rel="next" href="../T03/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>2. Servicio DNS (Domain Name System) - Despliegue de aplicaciones web</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#servicio-dns-domain-name-system" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Despliegue de aplicaciones web" class="md-header__button md-logo" aria-label="Despliegue de aplicaciones web" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Despliegue de aplicaciones web
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              2. Servicio DNS (Domain Name System)
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Cambiar a modo oscuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-orange"  aria-label="Cambiar a modo claro"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo claro" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="B칰squeda" placeholder="B칰squeda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando b칰squeda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegaci칩n" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Despliegue de aplicaciones web" class="md-nav__button md-logo" aria-label="Despliegue de aplicaciones web" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Despliegue de aplicaciones web
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Despliegue de aplicaciones web
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ud0 Introduccion
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Ud0 Introduccion
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/Ud0_1Introalmodulo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0.1. Introducci칩n al m칩dulo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/Ud0_2AWS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0.2. Introducci칩n a AWS Academy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/ejercicio-final-ebs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    游빍 Ejercicio final: modifica, prueba en local y despliega en Elastic Beanstalk
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_4" >
        
          
          <label class="md-nav__link" for="__nav_2_4" id="__nav_2_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Pr치cticas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_4">
            <span class="md-nav__icon md-icon"></span>
            Pr치cticas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/P0_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P0.1. Linux Server en AWSAcademy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/P0_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P0.2 Windows Server en AWSAcademy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/P0_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P0.3. Conceder acceso a un segundo administrador
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/P0_4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P0.4. Comandos b치sicos Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/P0_5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P0.5: Despliegue Java en AWS Elastic Beanstalk
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="servicio-dns-domain-name-system">Servicio DNS (Domain Name System)</h1>
<p><img alt="DNS" src="../Ud5_1/DNS-para-tontos.jpeg" /></p>
<h2 id="introduccion">Introducci칩n</h2>
<p>El sistema de nombres de dominio DNS (Domain Name System) proporciona un mecanismo eficaz para llevar a cabo la resoluci칩n de nombres de dominio a direcciones IP. Como usuarios (humanos) nos es m치s f치cil dirigirnos a un nombre de dominio (de host, de web, de servidor de correo, etc.) utilizando un texto identificativo (por ejemplo, www.gva.es) que a la direcci칩n IP correspondiente (por ejemplo, 193.144.127.85). El servicio DNS no solo permite hacer la resoluci칩n de nombres de dominio a direcciones IP, sino tambi칠n la resoluci칩n inversa. Es decir, a partir de una IP averiguar el nombre de dominio. </p>
<p>El servicio DNS proporciona independencia del nombre de dominio respecto a la IP. As칤 un dominio puede cambiar de IP de forma transparente para los usuarios del dominio. Incluso es usual que un dominio se identifique con m치s de una IP como medida de redundancia contra la ca칤da del sistema o como balanceo de cargas. Otros servicios proporcionados por el DNS son la identificaci칩n de los servidores de correo de un dominio, de cada uno de los hosts que pertenecen a la red, servidores de impresi칩n, etc.</p>
<h2 id="sistemas-de-nombres-planos-y-jerarquicos">Sistemas de nombres planos y jer치rquicos</h2>
<p>El problema de la identificaci칩n de equipos se produce desde el principio de la existencia de las redes de ordenadores y no es algo espec칤fico de TCP/IP. Hac칤a falta un <em>lenguaje humano</em> para realizar esta identificaci칩n. </p>
<p>En los albores de las redes, cuando ARPANET (la red predecesora de Internet), los nombres los equipos se centralizaban en un archivo llamado host.txt (/etc/hosts en Linux), que inclu칤a el nombre del equipo y su IP. Esto es lo que se conoce como un <strong><em>sistema de nombres plano</em></strong>. Puede ser adecuado para redes peque침as, pero no es escalable ni pr치ctico en redes grandes y mucho menos en Internet. </p>
<p>Ejemplo de fichero de nombres plano: </p>
<p><img alt="" src="../Ud5_2/dns1.png" /></p>
<h3 id="elementos-del-sistema-de-nombres-de-dominio">Elementos del sistema de nombres de dominio</h3>
<p>El <strong>espacio de nombres de dominio</strong> est치 formado por los nombres v치lidos utilizados para identificar servicios o m치quinas en una red. Se puede representar mediante una <strong>estructura jer치rquica de topolog칤a arb칩rea</strong>, es decir, todos los nombres forman un 치rbol invertido donde cada nodo se separa de los otros nodos por un punto <code>.</code>. </p>
<p><img alt="" src="../Ud5_2/dns2.png" /></p>
<h4 id="nombres-de-dominio">Nombres de dominio</h4>
<p>Los nombres de dominio pueden estar formados por una o m치s cadenas de caracteres separadas por puntos y no se distingue entre may칰sculas y min칰sculas. Por ejemplo, www.deaw.es. es lo mismo que WWW.deaw.ES.. </p>
<p><img alt="" src="../Ud5_2/dns3.png" /></p>
<p>Los nombres de dominio se expresan como secuencias de <strong>etiquetas (labels)</strong>.</p>
<h4 id="dominios-raiz">Dominios ra칤z</h4>
<p>En teor칤a, todos los dominios deben de terminar con un punto <code>.</code>. Es as칤 porque el <strong>치rbol de nombres de dominio (espacio de nombres de dominio)</strong> empieza con el dominio <code>.</code> que se conoce como <strong>dominio ra칤z (root)</strong>. En realidad es un elemento nulo de 0 caracteres que se representa con un punto <code>.</code>. </p>
<p>Un dominio se lee de derecha a izquierda, empezando por el punto <code>.</code>, aunque en la pr치ctica lo hacemos de izquierda a derecha. El punto inicial, generalmente se omite ya que los programas lo a침aden por defecto y es meramente formal, pero en ocasiones, como en los ficheros de configuraci칩n de la zona, ser치 necesario que indiquemos el nombre de dominio completo incluyendo el <strong>dominio ra칤z</strong>, es lo que se conoce como nombres de dominio completos (<strong>Fully Qualified Domain Names, FQDN</strong>). </p>
<h4 id="dominios-y-subdominios">Dominios y subdominios</h4>
<p>Como consecuencia de la organizaci칩n jer치rquica del espacio de nombres de dominios, podemos utilizar los t칠rminos dominio y subdominio. Por ejemplo, <code>deaw.es.</code> es un subdominio del dominio <code>es.</code> y <code>www.deaw.es</code>. es un subdominio del dominio <code>deaw.es.</code>. </p>
<p>Los dominios o subdominios que cuelgan del dominio ra칤z <code>.</code> se conocen como dominios de primer nivel o dominios de nivel superior (<strong>Top Level Domains, TLD</strong>), los que cuelgan de los dominios TLD se denominan dominios de segundo nivel y as칤 sucesivamente</p>
<h3 id="zonas">Zonas</h3>
<div class="admonition atenci칩n">
<p class="admonition-title">Atenci칩n</p>
<div class="highlight"><pre><span></span><code>Una zona es una porci칩n del espacio de nombres de dominio en el DNS cuya responsabilidad administrativa recae sobre un 칰nico responsable.
</code></pre></div>
</div>
<p>Los servidores que gestionan la zona tienen informaci칩n completa sobre ella y se dice que son autorizados para esa zona. </p>
<p>Las <strong>zonas</strong> se almacenan en <strong>archivos de texto</strong> o en <strong>bases de datos</strong>, seg칰n el tipo de software que se utilice para montar el <strong>servidor DNS</strong> y de como se configure. </p>
<p>Tomemos como ejemplo el dominio deaw.es. y veamos parte de su archivo de zona </p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="s">...</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>deaw<span class="s">.es.         IN NS      ns1.deaw.es.</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>ns1<span class="s">.deaw.es.     IN A       192.168.1.20</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>natos<span class="s">.deaw.es. IN   A       192.168.1.21</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>waor<span class="s">.deaw.es.    IN A       192.168.1.22</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a>www<span class="s">.deaw.es.     IN CNAME   natos.deaw.es.</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a>ftp<span class="s">.deaw.es.     IN CNAME   waor.deaw.es.</span>
<a id="__codelineno-0-8" name="__codelineno-0-8" href="#__codelineno-0-8"></a><span class="s">...</span>
</code></pre></div>
A cada una de las l칤neas del fichero se las conoce como <strong>registros de recurso (RR: Resource Records)</strong> y definen los tipos de datos en el Domain Name System (DNS). Se utilizan para almacenar datos sobre nombres de dominio y direcciones IP. Una base de datos o fichero de zona est치 formada por una serie de registros de recursos. Cada registro de recurso da informaci칩n pertinente sobre un objeto determinado. Por ejemplo, los <strong>registros de tipo (A)</strong> asocian un nombre de host con una direcci칩n IP, y los <strong>registros de puntero de b칰squeda inversa (PTR)</strong> asocian una direcci칩n IP con un nombre de host y un <strong>registro (NS)</strong> define un servidor DNS para la zona. El servidor DNS utiliza estos registros de recurso para resolver las consultas de los hosts de su zona. </p>
<p>Cuando un <strong>servidor DNS es autorizado</strong> para una zona, es el responsable de los nombres de dominio para esa zona. En nuestro ejemplo, ns1.deaw.es es el servidor autorizado para la zona deaw.es. y en 칠l se definen los nombres que cuelgan de deaw.es como por ejemplo, www.deaw.es, ftp.deaw.es, natos.deaw.es, etc. </p>
<p><img alt="" src="../Ud5_2/dns3.webp" style="height:450px;width:650px" /></p>
<p>La organizaci칩n que administra el servidor DNS y por lo tanto la zona, puede delegar o no alguno de sus subdominios. Supongamos que de deaw.es. cuelgan los subdominios teoria.deaw.es. y practicas.deaw.es. y se decide delegar solo el subdominio practicas.deaw.es.. Esto implica que existir치 otro servidor DNS autorizado para el dominio practicas.deaw.es., que almacenar치 el fichero de zona para dicho dominio.</p>
<div class="admonition atenci칩n">
<p class="admonition-title">Atenci칩n</p>
<div class="highlight"><pre><span></span><code>Una zona no es lo mismo que un dominio. Un **dominio** es un **subarbol del espacio de nombres de dominio** y los datos asociados a los nombres de un **dominio** pueden estar almacenados en una o varias **zonas**, distribuidas en uno o varios **servidores DNS**.

B치sicamente una zona es una porci칩n de un dominio.
</code></pre></div>
</div>
<p>Un <strong>servidor DNS</strong> puede ser autorizado sobre varias <strong>zonas</strong>, por ejemplo, el mismo <strong>servidor DNS</strong> puede ser autorizado para la zona deaw.es. y para la zona seguridadinformatica.es..</p>
<p><img alt="" src="../Ud5_2/dns5.png" /></p>
<h4 id="tipos-de-rr-resource-record">Tipos de RR (Resource Record)</h4>
<p>En esta subsecci칩n vamos a ver cu치les son los registros de recursos o RR m치s utilizados. Antes debemos aclarar algunos conceptos:</p>
<h5 id="ttl-time-to-live">$TTL (Time To Live)</h5>
<p>El TTL o tiempo de vida determina, en segundos, durante cu치nto tiempo son validos los RR. Pueden indicarse en semanas (TTL 1W), d칤as (TTL 7D), horas (TTL 168H) o minutos (10080M).</p>
<p>En otras palabras, el TTL indica cu치nto tiempo tardar치n en aplicarse los cambios que le hagamos a un RR desde que los hacemos. En el ejemplo del p치rrafo anterior, los servidores DNS comprobar치n cada semana si se ha producido alg칰n cambio en esos RR.
Debe declararse al inicio del archivo de zona.</p>
<h5 id="origin">$ORIGIN</h5>
<p>La directiva $ORIGIN define el nombre del dominio que ser치 a침adido al final de cualquier nombre que no acabe en punto (nombres relativos o no cualificados) en los RR, para as칤 transformarlos en nombres FQDN (fully qualified domain name). Si un nombre acaba en punto, se considera un nombre FQDN y no se utilizar칤a $ORIGIN.</p>
<p>Su sintaxis o forma de escribirlo ser치:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="s">$ORIGIN nombre-dominio</span>
</code></pre></div>
<p>Por ejemplo:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="s">$ORIGIN deaw.es.</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="s">;A partir de aqu칤 se a침ade deaw.es. a todos los nombres relativos</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="s">...</span>
</code></pre></div>
<h5 id="formato-general-de-los-rr">Formato general de los RR</h5>
<p>El formato con el que se introducen los RR en los archivos de zona es del siguiente estilo:</p>
<p><div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>Nombre de dominio       <span class="s">[TTL]       Clase       Tipo        Tipo-Dato</span>
</code></pre></div>
As칤 por ejemplo, un RR quedar칤a tal que as칤:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>profesor<span class="s">.deaw.es    7200        IN      A       192.168.10.254</span>
</code></pre></div>
<p>Aclarados los puntos anteriores, ahora s칤 vamos a ver los principales tipos de registros.</p>
<h5 id="tipos-de-registros">Tipos de registros</h5>
<ul>
<li>
<p><u><strong>Registro SOA (Start Of Authority)</strong></u>: Especifica informaci칩n autoritaria sobre una zona DNS, incluyendo el servidor de nombre primario, el email del administrador, el n칰mero de serial o versi칩n de la zona, y varios temporizadores.</p>
<p>Ejemplo:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>    deaw<span class="s">.es.   IN   SOA   ns1.deaw.es.   super.deaw.es. (</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>                20190425001 <span class="s">; serial</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>                604800  <span class="s">; refresh (7 d칤as)</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>                86400   <span class="s">; retry (1 d칤a)</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>                2419200 <span class="s">; expire (28 d칤as)</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a>                604800 )    <span class="s">; TTL negativo (7 d칤as)</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a>    <span class="s">...</span>
</code></pre></div>
<ul>
<li>
<p>Nombre del dominio: deaw.es.</p>
<ul>
<li>Indica el dominio para el que aplica este registro SOA.</li>
</ul>
</li>
<li>
<p>Clase de registro: IN</p>
<ul>
<li>Especifica la clase de red, en este caso, "Internet".</li>
</ul>
</li>
<li>
<p>Tipo de registro: SOA</p>
<ul>
<li>Indica que es un registro de inicio de autoridad.</li>
</ul>
</li>
<li>
<p>Servidor principal (Primary NS): ns1.deaw.es.</p>
<ul>
<li>Nombre del servidor DNS principal que administra la zona.</li>
</ul>
</li>
<li>
<p>Correo del administrador: super.deaw.es.</p>
<ul>
<li>Representa el correo del administrador de la zona (convertido a super@deaw.es).</li>
</ul>
</li>
<li>
<p>Par치metros de control:</p>
<ul>
<li>Serial: 20190425001<ul>
<li>N칰mero de versi칩n del registro, que se incrementa cuando se actualiza la zona.</li>
<li>Formato: AAAAMMDDNN (a침o, mes, d칤a, n칰mero de cambio).</li>
</ul>
</li>
<li>Refresh: 604800 (7 d칤as)<ul>
<li>Tiempo en segundos que los servidores secundarios esperan antes de consultar al primario por cambios.</li>
</ul>
</li>
<li>Retry: 86400 (1 d칤a)<ul>
<li>Intervalo en segundos para reintentar la conexi칩n con el servidor primario si falla tras el tiempo de refresh.</li>
</ul>
</li>
<li>Expire: 2419200 (28 d칤as)<ul>
<li>Tiempo en segundos tras el cual los datos de la zona se consideran inv치lidos si no se ha podido contactar con el primario.</li>
</ul>
</li>
<li>TTL Negativo: 604800 (7 d칤as)<ul>
<li>Tiempo que un servidor cachear치 una respuesta negativa (por ejemplo, si un dominio no existe) antes de volver a consultar.</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li>
<p><u><strong>Registro NS (Name Server)</strong></u>:Cuando se delega la administraci칩n de subdominios en otros servidores, este registro indica cu치les son esos servidores autorizados.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="s">...</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>deaw<span class="s">.es.    IN  NS  ns1.deaw.es.    ;Servidor DNS maestro</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>deaw<span class="s">.es.    IN  NS  ns2.deaw.es.    ;Servidor DNS esclavo</span>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a>deaw<span class="s">.es.    IN  NS  dns.deaw.net.   ;Servidor DNS esclavo</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>
<a id="__codelineno-6-6" name="__codelineno-6-6" href="#__codelineno-6-6"></a>ns1<span class="s">.deaw.es.    IN  A   192.168.10.20</span>
<a id="__codelineno-6-7" name="__codelineno-6-7" href="#__codelineno-6-7"></a>ns2<span class="s">.deaw.es.    IN  A   192.168.10.21</span>
<a id="__codelineno-6-8" name="__codelineno-6-8" href="#__codelineno-6-8"></a>
<a id="__codelineno-6-9" name="__codelineno-6-9" href="#__codelineno-6-9"></a><span class="s">;DELEGACI칍N</span>
<a id="__codelineno-6-10" name="__codelineno-6-10" href="#__codelineno-6-10"></a>practicas<span class="s">.deaw.es.  IN  NS  ns1.practicas.deaw.es.</span>
<a id="__codelineno-6-11" name="__codelineno-6-11" href="#__codelineno-6-11"></a>redes<span class="s">.deaw.es.      IN  NS  dns.deaw.net.</span>
</code></pre></div>
</li>
<li>
<p><u><strong>El registro A (Address)</strong></u>, tambi칠n conocido como registro de direcci칩n, establece una correspondencia entre un nombre de dominio completamente cualificado (FQDN) y una direcci칩n IP versi칩n 4.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="s">...</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>ns1<span class="s">.deaw.es.        IN  A   192.168.10.20</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>ns2<span class="s">.deaw.es.        IN  A   192.168.10.21</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>natos<span class="s">.deaw.es.      IN  A   192.168.10.22</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a><span class="s">...</span>
</code></pre></div>
</li>
<li>
<p>El <u><strong>registro CNAME (Canonical Name)</strong></u> permite crear alias para nombres de dominio especificados en registros A.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="s">...</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>natos<span class="s">.deaw.es.      IN  A   192.168.1.22</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>www<span class="s">.deaw.es.        IN  CNAME   natos.deaw.es.</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>ftp<span class="s">.deaw.es.        IN  CNAME   natos.deaw.es.</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a><span class="s">...</span>
</code></pre></div>
<p>Un registro CNAME tambi칠n puede apuntar a un nombre de otro dominio.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="s">...</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>www<span class="s">.deaw.es.    IN  CNAME   www.deaw.com.</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="s">...</span>
</code></pre></div>
</li>
<li>
<p>El <u><strong>registro MX (Mail Exchange)</strong></u> permite definir los servidores encargados de la entrega de correo en el dominio y la prioridad entre ellos. Su sint치xis es la siguiente:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="s">...</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="hll">deaw<span class="s">.es.    IN  MX  10  mail1.deaw.es.</span>
</span><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="hll">deaw<span class="s">.es.    IN  MX  20  mail2.deaw.es.</span>
</span><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>mail1<span class="s">.deaw.es.  IN  A   192.168.1.100</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>mail2<span class="s">.deaw.es.  IN  A   192.168.1.101</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a><span class="s">...</span>
</code></pre></div>
</li>
<li>
<p>El <u><strong>registro PTR (Pointer Record)</strong></u> establece una correspondencia entre direcciones IPv4 e IPv6 y nombres de dominio. Se utilizan en las zonas de resoluci칩n inversa.</p>
<p>En el caso de un bloque IPv4 de prefijo <code>/24</code>, por ejemplo el <code>192.168.1.0/24</code>, los registros PTR ser칤an los siguientes:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="s">...</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="m">20</span><span class="s">.1.168.192.in-addr.arpa.    IN    PTR    ns1.deaw.es.</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="m">21</span><span class="s">.1.168.192.in-addr.arpa.    IN    PTR    ns2.deaw.es.</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="m">22</span><span class="s">.1.168.192.in-addr.arpa.    IN    PTR    natos.deaw.es.</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="s">...</span>
</code></pre></div>
<p>o lo que es lo mismo:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="s">...</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="m">20</span>    IN    PTR    ns1<span class="s">.deaw.es.</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="m">21</span>    IN    PTR    ns2<span class="s">.deaw.es.</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="m">22</span>    IN    PTR    natos<span class="s">.deaw.es.</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="s">...</span>
</code></pre></div>
</li>
<li>
<p>El <u><strong>registro TXT (plaint text)</strong></u> permite asociar informaci칩n adicional a un dominio mediante m칰ltiples cadenas de texto, con una longitud m치xima de 255 caracteres cada una de ellas. Por ejemplo, utilizado para almacenar claves de cifrado.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="s">...</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="s">@   IN  TXT     &quot;Servidor maestro de Servicios en Red&quot;</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a><span class="s">@   IN  TXT     &quot;Servidor maestro de Servicios en Red&quot;</span>
</code></pre></div>
</li>
</ul>
<h2 id="tipos-de-servidores-dns">Tipos de servidores DNS</h2>
<h3 id="servidor-maestro-o-primario">Servidor maestro o primario</h3>
<p>Un servidor <strong>maestro o primario</strong>, define una o varias zonas de las que es autorizado. Sus archivos de zona son de lectura y escritura y es en ellos donde el administrador del servidor a침ade, modifica o elimina nombres de dominio.</p>
<ul>
<li>
<p>Si un cliente DNS u otro servidor DNS le pregunta por alg칰n nombre de dominio <strong>para el que es autorizado</strong>, consulta con los ficheros de zona y responde a la pregunta.</p>
</li>
<li>
<p>Si un cliente DNS u otro servidor DNS le pregunta por alg칰n nombre de dominio <strong>para el que no es autorizado</strong>, tendr치 que preguntar a otros servidores DNS o responder que no conoce la respuesta.</p>
</li>
</ul>
<h3 id="servidor-esclavo-o-secundario">Servidor esclavo o secundario</h3>
<p>Un servidor <strong>esclavo o secundario</strong> define una o varias zonas para las que es autorizado. La diferencia con respecto a un servidor maestro es que los ficheros de zona los obtiene de otro servidor autorizado para la zona, normalmente, de un servidor maestro mediante un procedimiento denominado <strong>transferencia de zona</strong>. Los ficheros de zona de los servidores esclavos son de solo lectura y por lo tanto, el administrador no tiene que editarlos. La modificaci칩n de los archivos de zona debe realizarla el servidor maestro que transfiere la zona.</p>
<p><img alt="dnsmaestro_esclavo" src="../Ud5_2/dns18.png" /></p>
<p>El funcionamiento de como responden a los clientes DNS o a otros servidores DNS es similar al de un servidor maestro.
Un servidor puede ser maestro para una o varias zonas y al mismo tiempo ser esclavo para otras.</p>
<p><u><strong>Pueden existir varios servidores esclavos para una misma zona</strong></u>. Las razones para esto suelen ser:</p>
<ul>
<li>Reducir y repartir la carga entre varios servidores DNS.</li>
<li>Favorecer la tolerancia a fallos.</li>
<li>Ofrecer mayor rapidez.</li>
</ul>
<p>Lo ideal es que los servidores DNS para una misma zona est칠n ubicados en redes y localizaciones diferentes para evitar que, si ocurre alg칰n problema no les afecte simult치neamente y deje sin servicio de resoluci칩n a los nombres de esa zona.</p>
<p><img alt="" src="../Ud5_2/dns6.png" /></p>
<h3 id="servidor-cache">Servidor cach칠</h3>
<p>Los servidores DNS se configuran como servidores cache para mejorar los tiempos de respuesta de las consultas, reducir la carga de los equipos y disminuir el tr치fico de red.</p>
<p>Cuando un servidor DNS recibe una pregunta sobre un dominio para el cual no es autorizado, es decir, de un nombre del cual no tiene informaci칩n, puede preguntar, si as칤 est치 configurado, a otros servidores para obtener la respuesta. Si el servidor act칰a como cache, guarda durante un tiempo (TTL: Time To Live) las respuestas a las 칰ltimas preguntas que ha realizado a otros servidores DNS. Cada vez que un cliente DNS u otro servidor DNS le formula una pregunta, comprueba si tiene la respuesta en su memoria cache, si la tiene, no tendr치 que preguntar a otro servidor DNS por la pregunta.</p>
<p>Un servidor DNS es solo cache (cache only server) cuando:</p>
<ul>
<li>No tiene autoridad sobre ninguna zona.</li>
<li>Pregunta a otros servidores DNS para resolver las preguntas de los clientes DNS y las guarda en su memoria cache.</li>
</ul>
<p>En el siguiente gr치fico se explica como dos clientes DNS hacen preguntas a un mismo servidor DNS que es autorizado para algunas zonas y adem치s act칰a como cach칠.</p>
<p><img alt="" src="../Ud5_2/dns7.png" /></p>
<h3 id="servidor-forwarder">Servidor <strong>forwarder</strong></h3>
<p>Un <strong>forwarder</strong> es un servidor DNS que otros servidores DNS designan para reenviarle consultas. Son utilizados para minimizar las consultas y el tr치fico de peticiones DNS desde una red hacia Internet.</p>
<p>Cuando a un servidor DNS se le hace una pregunta sobre un nombre de dominio del que no dispone informaci칩n (no es autorizado), este tendr치 que preguntar a otros servidores DNS. Simplificando, existen dos formas de procesar las consultas:</p>
<ul>
<li>
<p>El servidor no tiene un <strong>forwarder</strong> configurado, es decir, no tiene configurada la IP de otro servidor DNS, al que llamaremos <strong>forwarder</strong> al que reenviarle la consulta. Por tanto, intentar치 resolver la consulta por si mismo recurriendo al servidor ra칤z <code>.</code>. En este caso realiza una consulta iterativa que veremos en detalle m치s adelante.</p>
<p><img alt="" src="../Ud5_2/dns8.png" /></p>
</li>
<li>
<p>El servidor tiene configurado un <strong>forwarder</strong>. Le trasladar치 la consulta a dicho <strong>forwarder</strong>. Y esperar치 la respuesta para trasladarla al cliente.</p>
<p><img alt="" src="../Ud5_2/dns9.png" /></p>
</li>
</ul>
<p>En estas im치genes hay algunos textos que nos pueden llevar a confusi칩n. Vamos a aclarar algunas cosas. Fij치ndonos siempre en el servidor DNS m치s hacia la izquierda, en la primera imagen dice "Servidor DNS: no reenvia consultas a otro servidor (reenviador)", quiere decir que no tiene un "forwarder o reenviador" configurado y que, por tanto, intentar치 칠l obtener la resoluci칩n. En la segunda imagen dice "Servidor DNS: reenv칤a consultas", por tanto, tiene configurado un "forwarder" y a 칠l le traslada la pregunta para que se la resuelva.</p>
<p>Despu칠s habla de que el primero "tiene la recursividad activada" y en la segunda imagen "hace las consultas de forma recursiva". Veremos esto en detalle m치s adelante, que no nos confunda ahora.</p>
<h3 id="servidor-solo-autorizado">Servidor s칩lo autorizado</h3>
<p>Un Servidor solo autorizado (authoritative only) es aquel que es autorizado para una o varias zonas como servidor maestro y/o esclavo y no responde a preguntas que no sean relativas a sus zonas. Es decir, no tiene activada la recursividad, no es "forwarder" y no act칰a como cache.</p>
<h3 id="servidores-raiz">Servidores ra칤z</h3>
<p>En Internet existen un conjunto de servidores DNS autorizados para el dominio ra칤z <code>.</code>, conocidos como servidores ra칤z (root servers). Contienen el fichero de la zona <code>.</code> que contiene informaci칩n sobre los servidores DNS autorizados para cada uno de los dominios TLD.</p>
<p>Los servidores ra칤z son una parte fundamental de Internet, son el primer paso en la traducci칩n (resoluci칩n) de los nombres de host en direcciones IP, que se utilizan en la comunicaci칩n entre los hosts de Internet. Son claves en el proceso de resoluci칩n de nombres de dominio en Internet, y deben de ser conocidos por todos los servidores DNS que respondan a preguntas sobre nombres para los que no son autorizados.</p>
<p>Existen 13 servidores ra칤z en toda Internet y cada uno de ellos tiene m칰ltiples copias distribuidas por todo el mundo, es decir, que f칤sicamente no solo son 13 servidores. Cada conjunto de copias de uno de los 13 servidores se identifica por una misma IP. Cuando un cliente realiza una pregunta a una IP de un servidor ra칤z, los routers de Internet encaminan la pregunta hacia la copia m치s cercana mediante un procedimiento denominado <em>anycasting</em>.</p>
<p>Los nombres de los servidores ra칤z son de la forma letra.root-servers.net, donde letra va desde la A a la M.</p>
<p>Listado de Servidores ra칤z</p>
<p><img alt="" src="../Ud5_2/dns10.png" /></p>
<h2 id="tipos-de-consultas-recursivas-e-iterativas">Tipos de consultas: recursivas e iterativas</h2>
<p>La diferencia entre una consulta recursiva y una consulta iterativa en el contexto de DNS radica en c칩mo se resuelven las peticiones y qui칠n se encarga del proceso completo de resoluci칩n.</p>
<h3 id="consultas-recursivas">Consultas recursivas</h3>
<p>Una consulta recursiva es aquella en la que el servidor DNS da una respuesta completa o exacta. Pueden darse tres tipos de respuesta:</p>
<ul>
<li>Positivas: se devuelve informaci칩n sobre el dominio consultado</li>
<li>Negativas: no se puede resolver el nombre de dominio</li>
<li>Error: debido a un fallo en la red</li>
</ul>
<h3 id="consultas-iterativas">Consultas iterativas</h3>
<p>Una consulta iterativa es aquella en la que el servidor DNS proporciona una respuesta parcial. Existen cuatro posibles respuestas:</p>
<ul>
<li>Positivas: se devuelve informaci칩n sobre el dominio consultado</li>
<li>Negativas: no se puede resolver el nombre de dominio</li>
<li>Referencia: el servidor DNS indica a otros servidores a los que se le puede consultar para resolver la pregunta</li>
<li>Error: debido a un fallo en la red</li>
</ul>
<h3 id="ejemplos">Ejemplos</h3>
<p>Completando la informaci칩n de la imagen del primer ejemplo del apartado del <strong>reenviador forwarder</strong>:</p>
<p><img alt="" src="../Ud5_2/dns11.png" /></p>
<p>Completando la informaci칩n de la imagen del segundo ejemplo del apartado del <strong>reenviador forwarder</strong>:</p>
<p><img alt="" src="../Ud5_2/dns12.png" /></p>
<p>Ahora ya podemos definir m치s f치cilmente que significa que un servidor DNS tiene la recursividad activada. Significa simplemente que responde a preguntas recursivas, es decir, da una respuesta completa a una pregunta que se le hace. Si no la tiene activada solo responder치 a consultas iterativas.</p>
<p>Y visto esto podemos volver a releer qu칠 es un servidor s칩lo autorizado para entenderlo mejor.</p>
<p>En la imagen de la izquierda el Root DNS Server, el TLD DNS server y el Authoritative DNS server no tienen la recursividad activada. Por tanto, responder치n a consultas iterativas en este caso con respuestas tipo "Referencia". En la imagen de la derecha, los 3 servidores mencionados tienen la recursividad activada, por lo que contestar치n a respuestas recursivas proporcionando la resoluci칩n completa.</p>
<p><img alt="" src="../Ud5_2/dns_query.png" /></p>
<h2 id="resolucion-inversa">Resoluci칩n inversa</h2>
<p>La resoluci칩n inversa consiste en obtener informaci칩n de un nombre de dominio preguntando por la direcci칩n IP en vez de preguntar por el nombre de domino como hemos explicado en apartados anteriores.</p>
<h3 id="mapeo-de-direcciones-y-el-dominio-arpa">Mapeo de direcciones y el dominio arpa</h3>
<p>El funcionamiento de la resoluci칩n de direcciones IP es igual al de la resoluci칩n de nombrres de dominio. Las direcciones IP se tratan como nombres que cuelgan del dominio <code>in-addr.arpa</code> para las direcciones IPv4, y del dominio <code>ip6.arpa</code> para las direcciones IPv6.</p>
<p><img alt="" src="../Ud5_2/dns13.png" /></p>
<p>Cuando usamos una direcci칩n IP, por ejemplo <code>192.168.1.21</code>, para realizar una pregunta DNS inversa, en realidad estamos preguntando por el nombre de dominio <code>21.1.168.192.in-addr.arpa</code>. La estructura jer치rquica de la direcci칩n IP, tratada como nombre de dominio, es de derecha a izquierda, comenzando por el dominio <code>in-addr.arpa</code>.</p>
<p><code>.arpa (Address and Routing Parameter Area)</code> es un dominio de nivel superior gen칠rico utilizado s칩lo para la infraestructura de Internet. Los subdominios de .arpa o dominios de segundo nivel 춺in-addr.arpa췉 e 춺ip6.arpa췉 son usados por los servidores DNS inversos para la obtenci칩n de direcciones IPv4 e IPv6 respectivamente.</p>
<p>Cuando mapeamos una direcci칩n IP estamos asociando la direcci칩n IP al nombre en el dominio .arpa. Por ejemplo la direcci칩n <code>192.168.1.21</code> es mapeada al nombre <code>21.1.168.192.in-addr.arpa</code>.</p>
<h3 id="zonas-de-resolucion-inversa">Zonas de resoluci칩n inversa</h3>
<p>Los servidores DNS almacenan zonas de resoluci칩n inversa con registros de recursos (RR) que asocien nombres de dominio con direcciones IP. Las zonas de resoluci칩n inversa pueden ser maestras o primarias y esclavas o secundarias.</p>
<p>Las zonas de resoluci칩n directa e inversa son independientes y es responsabilidad de los administradores de los servidores DNS que dichas zonas contengan informaci칩n coherente y que no existan discrepancias.</p>
<p>No es obligatorio que la entidad que administra una zona de resoluci칩n directa de un dominio tenga que administrar la zona de resoluci칩n inversa que se corresponda con las direcciones IPs asociadas a dicho dominio.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="s">...</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a>deaw<span class="s">.es.            IN  NS      ns1.deaw.es.</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>ns1<span class="s">.deaw.es.        IN  A       192.168.1.20</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a>natos<span class="s">.deaw.es.  IN  A       192.168.1.21</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a>waor<span class="s">.deaw.es.       IN  A       192.168.1.22</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>altea<span class="s">.deaw.es.      IN  A       192.168.1.23</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a>www<span class="s">.deaw.es.        IN  CNAME   natos.deaw.es.</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a>ftp<span class="s">.deaw.es.        IN  CNAME   waor.deaw.es.</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="s">...</span>
</code></pre></div>
<p>Archivo de zona de resoluci칩n directa del dominio deaw.es.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="s">...</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a><span class="m">1</span><span class="s">.168.192.in-addr.arpa.     IN  NS  ns1.deaw.es.</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="m">20</span><span class="s">.1.168.192.in-addr.arpa.  IN  PTR ns1.deaw.es.</span>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="m">21</span><span class="s">.1.168.192.in-addr.arpa.  IN  PTR natos.deaw.es.</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a><span class="m">22</span><span class="s">.1.168.192.in-addr.arpa.  IN  PTR waor.deaw.es.</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a><span class="m">23</span><span class="s">.1.168.192.in-addr.arpa.  IN  PTR altea.deaw.es.</span>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="s">...</span>
</code></pre></div>
<p>Archivo de zona de resoluci칩n inversa <code>1.168.192.in-addr.arpa</code> que permite resolver consultas inversas sobre direcciones IP de la red <code>192.168.1.0/24</code></p>
<h3 id="proceso-de-resolucion">Proceso de resoluci칩n</h3>
<p>El proceso de resoluci칩n inversa es similar al de resoluci칩n directa. Las direcciones IP se tratan como nombres de dominio. Por lo tanto, existen consultas recursivas, iterativas, cache, TTL...</p>
<p>Por ejemplo, si un cliente DNS realiza una consulta recursiva de la IP 192.168.1.21 a un servidor DNS, 칠ste, si no lo tiene en cache, iniciar치 una serie de consultas iterativas a los servidores DNS ra칤z, a los servidores autorizados para el dominio 192.in-addr.arpa y as칤 sucesivamente. </p>
<h2 id="herramientas">Herramientas</h2>
<h3 id="nslookup">Nslookup</h3>
<p>Es un programa para consultar servidores DNS. Se utiliza para saber si un servidor DNS resuelve correctamente los nombres DNS y las direcciones IP, para solucionar problemas frecuentes de los servidores DNS o, para diagnosticar problemas ocasionales de configuraci칩n en los servidores DNS. </p>
<p>Con nslookup podemos obtener la direcci칩n IP asociada a un nombre DNS y viceversa, adem치s, podemos preguntar a los servidores de nombres informaci칩n relativa a los registros de recursos (RR) de la/s zona/s de las que son autorizados.</p>
<p>nslookup se usa de dos modos: interactivo y no interactivo. El modo interactivo permite al usuario consultar los servidores DNS para obtener informaci칩n sobre varios hosts y dominios o para listar los hosts de un dominios. El modo no interactivo se usa para presentar solo el nombre y la informaci칩n solicitada para un host o nombre DNS.</p>
<p>Este comando funciona tanto en sistemas operativos UNIX/Linux como en Windows.
En su momento se trat칩 a nslookup como una aplicaci칩n 띿eprecated u obsoleta, pero a d칤a de  hoy parece que ha vuelto a considerarse apta para su uso normal.</p>
<p><img alt="" src="../Ud5_2/dns14.png" /></p>
<p><img alt="" src="../Ud5_2/dns15.png" /></p>
<p><img alt="" src="../Ud5_2/dns16.png" /></p>
<h3 id="dig">Dig</h3>
<p>Es un programa utilizado para preguntar a los servidores DNS.</p>
<p>Herramienta utilizada para solucionar problemas de DNS gracias a su flexibilidad, facilidad de uso y claridad en la presentaci칩n de la informaci칩n.
Normalmente, dig se usa pas치ndole argumentos desde la l칤nea de comandos (CLI), pero tambi칠n tiene un modo de operar por lotes, leyendo las consultas desde un archivo.</p>
<p>Este comando funciona tanto en sistemas operativos UNIX/Linux como en Windows</p>
<p><img alt="" src="../Ud5_2/dns17.png" /></p>
<h3 id="host">Host</h3>
<p>Host es una herramienta CLI sencilla y f치cil de usar para realizar consultas DNS, que traducen nombres de dominio a direcciones IP y viceversa. Tambi칠n se utiliza para consultar los registros DNS de las zonas que almacenan los servidores DNS, probar y validar el servidor DNS y la conectividad a Internet, registros de correo no deseado y listas negras, diagn칩stico de problemas en el servidor DNS...</p>
<h3 id="whois">Whois</h3>
<p>Aunque no es una herramienta de diagn칩stico DNS si que nos ofrece informaci칩n sobre el registro del dominio.</p>
<p>Whois es un protocolo que permite realizar consultas a bases de datos que contienen informaci칩n; del usuario, empresa u organizaci칩n que registra un nombre de dominio y/o una direcci칩n IP en Internet. El protocolo whois se encapsula en TCP y solo especifica el intercambio de peticiones y respuestas, no el formato de datos a intercambiar. Por eso, los resultados de las consultas whois pueden variar dependiendo de la base de datos whois a la que se pregunte. </p>
<h2 id="referencias">Referencias</h2>
<p><a href="https://www.zeppelinux.es/sistema-de-nombres-de-dominio-dns/">Zeppelinux</a></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "toc.integrate", "search.highlight", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>