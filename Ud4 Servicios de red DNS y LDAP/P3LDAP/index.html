
<!doctype html>
<html lang="es" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://laura-agut.github.io/Despliegue/Ud4%20Servicios%20de%20red%20DNS%20y%20LDAP/P3LDAP/">
      
      
        <link rel="prev" href="../P2DNSDocker/">
      
      
        <link rel="next" href="../P4LDAPFicheros/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.19">
    
    
      
        <title>Práctica 3 - Configuración de un servidor LDAP - Despliegue de aplicaciones web</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#practica-3-configuracion-de-un-servidor-ldap" class="md-skip">
          Saltar a contenido
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Cabecera">
    <a href="../.." title="Despliegue de aplicaciones web" class="md-header__button md-logo" aria-label="Despliegue de aplicaciones web" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Despliegue de aplicaciones web
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Práctica 3 - Configuración de un servidor LDAP
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Cambiar a modo oscuro"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Cambiar a modo oscuro" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3zm3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95zm-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="black" data-md-color-accent="deep-orange"  aria-label="Cambiar a modo claro"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Cambiar a modo claro" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5s-1.65.15-2.39.42zM3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29zm.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14zM20.65 7l-1.77 3.79a7.02 7.02 0 0 0-2.38-4.15zm-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29zM12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Búsqueda" placeholder="Búsqueda" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Buscar">
        
        <button type="reset" class="md-search__icon md-icon" title="Limpiar" aria-label="Limpiar" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Inicializando búsqueda
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navegación" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Despliegue de aplicaciones web" class="md-nav__button md-logo" aria-label="Despliegue de aplicaciones web" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Despliegue de aplicaciones web
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Despliegue de aplicaciones web
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Ud0 Introduccion
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Ud0 Introduccion
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/Ud0_1Introalmodulo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0.1. Introducción al módulo
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/Ud0_2AWS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    0.2. Introducción a AWS Academy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Prácticas
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Prácticas
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/P0_1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P0.1. Linux Server en AWSAcademy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/P0_2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P0.2 Windows Server en AWSAcademy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/P0_3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P0.3. Conceder acceso a un segundo administrador
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/P0_4/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P0.4. Comandos básicos Linux
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../Ud0%20Introduccion/P0_5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P0.5: Despliegue Java en AWS Elastic Beanstalk
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="practica-3-configuracion-de-un-servidor-ldap">Práctica 3 - Configuración de un servidor LDAP</h1>
<h2 id="creacion-de-la-maquina-virtual">Creación de la máquina virtual</h2>
<p>Para empezar, entra en AWS Academy y crea un nuevo EC2 Debian con estas características. </p>
<ul>
<li>Llámale ServidorLDAP.</li>
<li>Dale los recursos que te ofrece por defecto.</li>
<li>Crea un Grupo de seguridad con el nombre ServidorLDAP y abre los puertos necesarios para que una máquina externa pueda consultarlo.</li>
<li>Arranca la máquina y actualízala para que cuente con las últimas versiones de todos los paquetes.</li>
</ul>
<h2 id="servidor-ldap">Servidor LDAP</h2>
<p>Un servidor LDAP es un servidor de datos optimizado para la realización rápida de consultas de lectura y orientado al
almacenamiento de datos de usuarios a modo de directorio.</p>
<p>La principal utilidad de un directorio LDAP es como servidor de autentificación para los distintos servicios de un sistema
informático como puedan ser: autentificación para entrar en un PC, para entrar en una aplicación web, para acceder a un
servidor ftp, para acceder a servidores de correo entrante POP3 y saliente SMTP, etc...</p>
<p><img alt="ldap" src="../P5_2/ldap00.png" /></p>
<p>Si en nuestra red disponemos de un servidor LDAP y configuramos todos los PCs y todos los servicios de la red para que se
autentifiquen en él, bastará con crear las cuentas de usuario y grupos de usuarios en nuestro servidor LDAP para que los
usuarios puedan hacer uso del sistema y de sus servicios desde cualquier puesto de la red. Es un sistema ideal para
centralizar la administración de usuarios en un único lugar.</p>
<h2 id="instalacion-y-configuracion-de-openldap">Instalación y configuración de OpenLDAP</h2>
<p>Para simplificar la administración de los usuarios del sistema es ideal utilizar una base de datos accesible mediante LDAP.
Almacenar las cuentas de usuario de forma centralizada en un único repositorio facilitará la creación, modificación y
eliminación de cuentas de usuario y grupos de usuarios. Será necesario configurar los PCs de la red para que utilicen el
servidor LDAP como servidor de autentificación.</p>
<p>El servidor OpenLDAP está disponible en el paquete slapd por tanto, lo instalaremos utilizando apt-get. También nos
conviene instalar el paquete ldap-utils que contiene utilidades adicionales:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>slapd<span class="w"> </span>ldap-utils
</code></pre></div>
<p>Nos preguntará la password de administrador del servidor. Le pondremos "ieselcaminas"</p>
<p><img alt="ldap" src="../P5_2/ldap01.png" /></p>
<p>Ahora comprobaremos si el servicio está en marcha con el comando habitual y recordando que el servicio se llama <code>slapd</code>.</p>
<p>Vamos a ver qué información tiene ahora mismo la base de datos con el comando <code>slapcat</code></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nv">$sudo</span><span class="w"> </span>slapcat
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>dn:<span class="w"> </span><span class="nv">dc</span><span class="o">=</span>nodomain
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>objectClass:<span class="w"> </span>top
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>objectClass:<span class="w"> </span>dcObject
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>objectClass:<span class="w"> </span>organization
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>o:<span class="w"> </span>nodomain
<a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>dc:<span class="w"> </span>nodomain
<a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>structuralObjectClass:<span class="w"> </span>organization
<a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>entryUUID:<span class="w"> </span>3d387392-2972-103e-985d-2d8a79039ae4
<a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>creatorsName:<span class="w"> </span><span class="nv">cn</span><span class="o">=</span>admin,dc<span class="o">=</span>nodomain
<a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>createTimestamp:<span class="w"> </span>20231207173146Z
<a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>entryCSN:<span class="w"> </span><span class="m">20231207173146</span>.118049Z#000000#000#000000
<a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>modifiersName:<span class="w"> </span><span class="nv">cn</span><span class="o">=</span>admin,dc<span class="o">=</span>nodomain
<a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>modifyTimestamp:<span class="w"> </span>20231207173146Z
</code></pre></div>
<p>Como vemos solo está creado el nodo raíz y con dc=nodomain.</p>
<p>Vamos a configurar nuestro directorio con el nodo raíz <code>dc=daw,dc=ieselcaminas</code> siguiendo estos pasos</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>sudo<span class="w"> </span>dpkg-reconfigure<span class="w"> </span>slapd
</code></pre></div>
<p><img alt="ldap" src="../P5_2/ldap02.png" /></p>
<p><img alt="ldap" src="../P5_2/ldap03.png" /></p>
<p><img alt="ldap" src="../P5_2/ldap04.png" /></p>
<p><img alt="ldap" src="../P5_2/ldap05.png" /></p>
<p><img alt="ldap" src="../P5_2/ldap06.png" /></p>
<p>Ejecutamos nuevamente slapcat para ver las modificaciones:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>sudo<span class="w"> </span>slapcat
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>dn:<span class="w"> </span><span class="nv">dc</span><span class="o">=</span>daw,dc<span class="o">=</span>ieselcaminas
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>objectClass:<span class="w"> </span>top
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>objectClass:<span class="w"> </span>dcObject
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>objectClass:<span class="w"> </span>organization
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>o:<span class="w"> </span>daw.ieselcaminas
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a>dc:<span class="w"> </span>daw
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>structuralObjectClass:<span class="w"> </span>organization
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a>entryUUID:<span class="w"> </span>02508bf0-297e-103e-94fc-6953981852de
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a>creatorsName:<span class="w"> </span><span class="nv">cn</span><span class="o">=</span>admin,dc<span class="o">=</span>daw,dc<span class="o">=</span>ieselcaminas
<a id="__codelineno-3-11" name="__codelineno-3-11" href="#__codelineno-3-11"></a>createTimestamp:<span class="w"> </span>20231207185601Z
<a id="__codelineno-3-12" name="__codelineno-3-12" href="#__codelineno-3-12"></a>entryCSN:<span class="w"> </span><span class="m">20231207185601</span>.251149Z#000000#000#000000
<a id="__codelineno-3-13" name="__codelineno-3-13" href="#__codelineno-3-13"></a>modifiersName:<span class="w"> </span><span class="nv">cn</span><span class="o">=</span>admin,dc<span class="o">=</span>daw,dc<span class="o">=</span>ieselcaminas
<a id="__codelineno-3-14" name="__codelineno-3-14" href="#__codelineno-3-14"></a>modifyTimestamp:<span class="w"> </span>20231207185601Z
</code></pre></div>
<p>Ya tenemos nuestro directorio iniciado con el nodo raíz que queríamos. La configuración de ldap con ficheros es compleja (puedes encontrar cómo hacerlo en las referencias), así que vamos a hacer uso de una herramienta web "phpldapadmin". La instalaremos con:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>sudo<span class="w"> </span>apt-get<span class="w"> </span>install<span class="w"> </span>phpldapadmin
</code></pre></div>
<p>Y desde el navegador web de nuestro PC accederemos con la URL: "http://IPSERVER/phpldapadmin". Si todo va bien tendremos algo similar a esto:</p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin01.png" /></p>
<p>Si pinchamos sobre login nos pedirá los datos de acceso. Si recordamos la salida de slapd nuestro usuario no es el que nos ofrece, sino <code>cn=admin,dc=daw,dc=ieselcaminas</code>. Recuerda que la password que pusimos fue <code>ieselcaminas</code>.</p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin02.png" /></p>
<p>Comprobamos como el login es correcto, pero el DIT o Directory Information Tree no es el correcto. El dn del nodo raíz en nuestro caso debería ser dc=daw,dc=ieselcaminas, pero phpldapadmin, por defecto, intenta mostrar un DIT cuyo nodo principal es "dc=example,dc=com". </p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin03.png" /></p>
<p>Vamos a solucionarlo editando el fichero de configuración de phpldapadmin, <code>/etc/phpldapadmin/config.php</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/phpldapadmin/config.php
</code></pre></div>
<p>Busca y sustituye las únicas 2 líneas donde aparece <code>dc=example,dc=com</code> y sustituyelo por <code>dc=daw,dc=ieselcaminas</code>. Lo encontrarás en más líneas, pero fíjate que en el resto la línea está comentada. Las 2 líneas a sustituir son:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nv">$servers</span>-&gt;<span class="p">;</span>setValue<span class="o">(</span><span class="s1">&#39;server&#39;</span>,<span class="s1">&#39;base&#39;</span>,array<span class="o">(</span><span class="s1">&#39;dc=example,dc=com&#39;</span><span class="o">))</span><span class="p">;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nv">$servers</span>-&gt;setValue<span class="o">(</span><span class="s1">&#39;login&#39;</span>,<span class="s1">&#39;bind_id&#39;</span>,<span class="s1">&#39;cn=admin,dc=example,dc=com&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div>
<p>Que quedarán así:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nv">$servers</span>-&gt;setValue<span class="o">(</span><span class="s1">&#39;server&#39;</span>,<span class="s1">&#39;base&#39;</span>,array<span class="o">(</span><span class="s1">&#39;dc=daw,dc=ieselcaminas&#39;</span><span class="o">))</span><span class="p">;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nv">$servers</span>-&gt;setValue<span class="o">(</span><span class="s1">&#39;login&#39;</span>,<span class="s1">&#39;bind_id&#39;</span>,<span class="s1">&#39;cn=admin,dc=daw,dc=ieselcaminas&#39;</span><span class="o">)</span><span class="p">;</span>
</code></pre></div>
<p>Si lees la descripción de esas líneas verás que también puedes borrarlas o comentarlas. En ese caso no te ofrecerá valores por defecto al entrar y tendrás que escribirlos tu.</p>
<p>Refresca tu navegador y ahora ya deberías ver el DIT correcto.</p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin04.png" /></p>
<p>Pincha sobre <code>dc=daw,dc=ieselcaminas</code>. La primera vez te saldrán muchos mensajes, no te preocupes. Vuelve a pincharle.</p>
<p>Vamos a crear 2 unidades organizativas, una para grupos y otra para usuarios. Seleccionamos "Create a child entry"</p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin05.png" /></p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin06.png" /></p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin07.png" /></p>
<p>El siguiente paso no necesita captura de pantalla. Completalo y comprueba que la ou=grupos se ha creado correctamente.</p>
<p>Crea tu mismo la ou=usuarios y comprueba ambas ou.</p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin08.png" /></p>
<p>Ahora vamos a crear los grupos. Comprueba primero que el gid que vas asignar a tus grupos no existe en <code>/etc/group</code>. El 10000 puede ser una buena opción para profesores y el 10001 para alumnos.</p>
<p>Para crear el grupo de profesores selecciona la ou=grupos y elige "Create a child entry". Selecciona "Default".</p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin09.png" /></p>
<p>Ahora elige posixGroup.</p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin10.png" /></p>
<p>Completa como en el ejemplo:</p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin11.png" /></p>
<p>Completa el asistente y comprueba que se ha creado el grupo. Ahora crea un nuevo grupo para los alumnos con gid=10001 y comprueba que tienes ambos creados.</p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin12.png" /></p>
<p>Ahora podemos pasar a crear los usuarios. Vamos primero a crear un "profe01" que pertenezca al grupo profesores.</p>
<p>Selecciona la ou=usuarios. Pincha sobre "Create a child entry" y elige "Default" como antes. Ahora elige <strong>account</strong> y <strong>posixAccount</strong> (matén CTRL apretado para seleccionar ambos). </p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin13.png" /></p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin14.png" /></p>
<p>Tras hacer clic sobre "commit" ya tendremos creado nuestro usuario.</p>
<p>Crea un par de usuarios más. Por ejemplo un <code>alu01</code> y <code>alu02</code>.</p>
<p><img alt="ldap" src="../P5_2/phpLDAPadmin15.png" /></p>
<h2 id="recursos">Recursos.</h2>
<p><a href="http://somebooks.es/sistemas-operativos-en-red/">Sistemas Operativos en Red</a> - Capítulo 11. Instalar y configurar OpenLDAP</p>
<p><a href="https://techexpert.tips/es/apache-es/apache-autenticacion-ldap-en-active-directory/">Apache - Autenticación LDAP en Active Directory
</a></p>
<p><a href="https://juancarlosmolinos.net/servidores-web-aplicaciones/apache/apache-2-2-autenticacion-basica-contra-un-ldap/">Apache 2.2 autenticación básica contra un LDAP
</a></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Volver al principio
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.top", "toc.integrate", "search.highlight", "content.code.annotate", "content.code.copy"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copiado al portapapeles", "clipboard.copy": "Copiar al portapapeles", "search.result.more.one": "1 m\u00e1s en esta p\u00e1gina", "search.result.more.other": "# m\u00e1s en esta p\u00e1gina", "search.result.none": "No se encontraron documentos", "search.result.one": "1 documento encontrado", "search.result.other": "# documentos encontrados", "search.result.placeholder": "Teclee para comenzar b\u00fasqueda", "search.result.term.missing": "Falta", "select.version": "Seleccionar versi\u00f3n"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
    
  </body>
</html>