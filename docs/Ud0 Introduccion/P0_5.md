---
title: "P0.5: Despliegue Java en AWS Elastic Beanstalk"
---

# :material-cloud-upload: Mi primer despliegue en AWS Elastic Beanstalk

En esta pr√°ctica aprender√°s a publicar una aplicaci√≥n Java sencilla en **Elastic Beanstalk (EB)** usando la **consola web de AWS**.  
Al final tendr√°s una **URL p√∫blica** con tu app en la nube. üöÄ


---

## :material-flag-checkered: Objetivo
- Generar un proyecto **Spring Boot WAR**.
- Verlo **en local**.
- Empaquetar el **`.war`** y **subirlo a Elastic Beanstalk (Tomcat)**.
- Abrir la **URL p√∫blica** y comprobar el *Hola Mundo*.


---

## :material-download: 1) Crear el proyecto en Start.Spring.io

1. Abre <https://start.spring.io>  
2. Selecciona:
   - **Project:** Maven
   - **Language:** Java
   - **Spring Boot:** 3.x
   - **Packaging:** **War**
   - **Java:** **17**
   - **Group:** `com.example`
   - **Artifact:** `hola-war`
   - **Name:** `hola-war`
   - **Package name:** `com.example.holawar`
   - **Dependencies:** `Spring Web`
3. Pulsa **Generate** ‚Üí se descargar√° `hola-war.zip`.

---

## :material-folder: 2) Descomprimir y abrir
Ahora que tenemos el proyecto descargado, vamos a descomprimirlo y abrirlo en nuestro editor de c√≥digo para empezar a trabajar con √©l. Si tienes Windows puedes hacerlo con click derecho y descomprimir.

```bash
unzip hola-war.zip
cd hola-war
code .    # opcional: abre en VS Code
```

Estructura inicial (resumen):
```
hola-war/
 ‚îú‚îÄ pom.xml
 ‚îî‚îÄ src/main/java/com/example/holawar/HolaWarApplication.java
```

---

## :material-file-plus: 3) A√±adir clase Controller
Nuestro proyecto a√∫n no muestra nada. Vamos a crear un controller muy sencillo que responda con un mensaje cuando entremos en la aplicaci√≥n.

### `HelloController`
Crea el archivo HelloController.java en la siguiente ruta: **`src/main/java/com/example/holawar/HelloController.java`**:

```java
package com.example.holawar;

import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RestController;

@RestController
public class HelloController {

  @GetMapping("/")
  public String hello() {
    return "Hola mundo desde WAR en Tomcat (Elastic Beanstalk)!";
  }
}
```

---

## :material-laptop: 4) Probar en local
Una vez creado el controlador, es buen momento para probar la aplicaci√≥n en nuestro ordenador. As√≠ confirmamos que funciona antes de empaquetarla y subirla a la nube.

??? "Opci√≥n A: Terminal / Maven (CLI)"

    Usa el *wrapper* o Maven instalado:

    ```bash
    mvn spring-boot:run         # si tienes Maven instalado
    # o
    ./mvnw spring-boot:run      # macOS/Linux
    ```

    Abre <http://localhost:8080> ‚Üí deber√≠a verse el texto.

    !!! tip "¬øPor qu√© `spring-boot:run`?"
        Al empaquetar como **WAR** con Tomcat en *scope `provided`*, ejecutar `java -jar target/*.war` no siempre funciona. Para pruebas locales, usa `spring-boot:run`.


??? "Opci√≥n B: IntelliJ IDEA"

    1. **Run desde la clase principal**: abre `HolaWarApplication.java`, haz **clic derecho ‚Üí Run 'HolaWarApplication.main()'**.

    * Alternativa: **Run ‚Üí Edit Configurations‚Ä¶ ‚Üí + ‚Üí Spring Boot** y selecciona la clase `com.example.holawar.HolaWarApplication` ‚Üí **Run**.
    2. (Opcional) Tambi√©n puedes usar la ventana **Maven** (icono del vaso) ‚Üí **Plugins** ‚Üí **spring-boot** ‚Üí **spring-boot:run**.
    3. Abre [http://localhost:8080](http://localhost:8080) en tu navegador ‚Üí deber√≠a verse el texto.

---

## :material-package-variant: 5) Empaquetar el `.war`
Cuando ya sabemos que funciona en local, necesitamos generar un archivo .war. Este archivo contiene nuestra aplicaci√≥n lista para desplegar en un servidor Tomcat, como el que ofrece AWS Elastic Beanstalk.

??? "Opci√≥n A: Maven / CLI"

    ```bash
    ./mvnw clean package   
    # o: 
    mvn clean package
    ```

    Se genera en:

    ```
    target/hola-war-0.0.1-SNAPSHOT.war
    ```
??? "Opci√≥n B: IntelliJ IDEA (Build Artifact)"

    1. Abre el proyecto `hola-war` en **IntelliJ IDEA**.
    2. Ve a **Build ‚Üí Build Project** (Ctrl/Cmd + F9) para compilar.
    3. Ahora **Build ‚Üí Build Artifacts‚Ä¶**

    * Selecciona **`hola-war:war`**.
    * Pulsa **Build**.
    4. El archivo **`.war`** aparecer√° en `target/hola-war-0.0.1-SNAPSHOT.war`.

    !!! note "Aseg√∫rate de que el proyecto empaqueta como WAR"
    En `pom.xml` debe estar **`<packaging>war</packaging>`** y el *plugin* de Spring Boot configurado. Esto ya viene as√≠ si lo generaste desde *start.spring.io* con **Packaging: War**.

---

## :material-aws: 6) Desplegar en AWS Elastic Beanstalk (Tomcat)
Con el .war generado, ya podemos dar el salto a la nube. Vamos a crear una aplicaci√≥n en Elastic Beanstalk, subir nuestro archivo y obtener una URL p√∫blica para comprobar que funciona.

1. Entra en la **Consola de AWS** ‚Üí busca **Elastic Beanstalk** ‚Üí **Create application**.  
![AWS Elastic Beanstalk](P0_5/beanstalk.png)
2. **Application name:** `hola-war`  
![AWS Elastic Beanstalk](P0_5/form1.png)
3. **Platform:** **Tomcat** ‚Üí *Corretto 17, Amazon Linux 2*  
4. **Application code:** **Upload your code** ‚Üí sube `target/hola-war-0.0.1-SNAPSHOT.war`  
![AWS Elastic Beanstalk](P0_5/form2.png)
5. Roles IAM: selecciona los que aparecen por defecto en los desplegables.  
![AWS Elastic Beanstalk](P0_5/form3.png)
6. Las siguientes pantallas de configuraci√≥n son opcionales, d√©jalas como est√°n por defecto y pulsa siguiente.
7. **Create environment** (Web server).  
8. Espera a **Health: OK** y haz clic en la **URL** que muestra EB.
![AWS Elastic Beanstalk](P0_5/form5.png)

Deber√≠as ver: *‚ÄúHola mundo desde WAR en Tomcat (Elastic Beanstalk)!‚Äù*

![AWS Elastic Beanstalk](P0_5/form6.png)

---

## :material-pencil: 7) Cambiar el mensaje y volver a desplegar (OPCIONAL)
El despliegue inicial suele ser solo una primera versi√≥n. Vamos a modificar el mensaje de la aplicaci√≥n y repetir el proceso de compilaci√≥n y despliegue para ver c√≥mo se actualiza en AWS.

Edita `HelloController.java`:
```java
return "Hola, <tu nombre>!";
```

Compila y despliega de nuevo:
??? "Opci√≥n A: Maven / CLI"
    ```bash
    mvn clean package
    # En EB ‚Üí Upload and deploy ‚Üí sube el nuevo .war
    ```
??? "Opci√≥n B: IntelliJ IDEA (Build Artifact)"
    1. Abre el proyecto en IntelliJ.
    2. Ve a Build ‚Üí Build Artifacts‚Ä¶
    3. Selecciona hola-war:war.
    4. Pulsa Build (o Rebuild para forzar).
    5. El .war actualizado estar√° en target/ (o en out/artifacts/ si configuraste otra ruta).
    6. En Elastic Beanstalk ‚Üí Upload and deploy ‚Üí sube ese nuevo .war.
---

## :material-lifebuoy: 8) Soluci√≥n de problemas
A veces algo falla. En este apartado encontrar√°s consejos para diagnosticar y resolver los errores m√°s comunes al ejecutar o desplegar la aplicaci√≥n.

??? question "502 Bad Gateway / Health rojo"
    - Revisa que la **plataforma** es **Tomcat (Corretto 17)**, no Java SE.
    - Saca **Logs ‚Üí Request logs ‚Üí Last 100 lines** y mira `catalina.out` / `web.stderr.log`.

??? question "No arranca en local"
    - Usa `mvn spring-boot:run` (o `./mvnw spring-boot:run`).
    - Comprueba `java -version` = 17.

??? question "Gener√© con Java 21"
    - EB Tomcat usa **Corretto 17** ‚Üí reconstruye el proyecto con Java **17**.

---

## :material-broom: 9) Limpieza (evitar costes)
Cuando terminamos de practicar, es importante borrar el entorno de Elastic Beanstalk. As√≠ evitamos que la cuenta de AWS siga generando gastos innecesarios.
En Elastic Beanstalk ‚Üí tu entorno ‚Üí **Actions ‚Üí Terminate environment**.  
(Opcional: elimina la **Application** y el **bucket S3** si no la vas a reutilizar.)

---

