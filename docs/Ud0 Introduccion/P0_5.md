---
title: "P0.5: Despliegue Java en AWS Elastic Beanstalk"
---

# :material-cloud-upload: Mi primer despliegue en AWS Elastic Beanstalk

En esta pr√°ctica aprender√°s a publicar una aplicaci√≥n Java sencilla en **Elastic Beanstalk (EB)** usando la **consola web de AWS**.  
Al final tendr√°s una **URL p√∫blica** con tu app en la nube. üöÄ

---

## :material-flag-checkered: Objetivo
Desplegar una API **Hello** de Spring Boot sobre EB (plataforma **Java / Corretto 21**) y entender el ciclo:

‚û°Ô∏è **Subir ‚Üí Desplegar ‚Üí Probar ‚Üí Limpiar**

!!! info "Duraci√≥n estimada"
    ‚è±Ô∏è 25‚Äì35 minutos (la primera vez).

---

## :material-format-list-checks: Requisitos 
- Archivo **`java-eb-demo.zip`**:.  
- *(Opcional)* Maven y Java 21 si quieres recompilar.

!!! tip "¬øQu√© hay dentro del ZIP?"
    - Un **`.jar`** ejecutable de Spring Boot.  
    - Un **`Procfile`** que indica a EB c√≥mo arrancar la app.  

---

## :material-play-circle: Paso a paso

### :material-login-variant: 1) Acceso al servicio
1. Entra en la consola: [https://www.awsacademy.com/login](https://www.awsacademy.com/login)  
2. Busca **Elastic Beanstalk** :material-magnify:.
![AWS Elastic Beanstalk](P0_5/beanstalk.png)

---

### :material-application: 2) Crear la aplicaci√≥n
1. Haz clic en **Create application**.  
2. Completa los datos:  
   - **Application name** ‚Üí `demo-java`  
        ![NombreAplicacion](P0_5/form1.png)
   - **Plataforma** ‚Üí **Java** ‚Üí *Corretto 17 running on 64bit Amazon Linux 2*  
   - **C√≥digo de la aplicaci√≥n** ‚Üí **Cargar el c√≥digo** ‚Üí selecciona `java-eb-demo.zip`  
        ![SubirArchivo](P0_5/form2.png)
   - **Pol√≠ticas**  ‚Üí selecciona las que hay por defecto
        ![SubirArchivo](P0_5/form3.png)
   - El resto de pantallas son opcionales. Pulsa siguiente hasta llegar a la final.
3. Pulsa en **Create environment** (tipo **Web server**).

!!! note "Tiempo de espera"
    EB crear√° autom√°ticamente:  
    - una instancia **EC2**  
    - un balanceador de carga  
    - grupos de seguridad y S3  
    <br>‚è≥ Aproximadamente 2‚Äì3 minutos.  
    <br>Contin√∫a cuando veas **Health: OK** :material-check-circle:.

---

### :material-web: 3) Probar la aplicaci√≥n
Cuando el entorno est√© listo:  
- Haz clic en la **URL p√∫blica** que aparece arriba.  
- Ver√°s el mensaje:  


Hola Mundo!


??? note "üß™ Ejercicio final: modifica, prueba en local y despliega en Elastic Beanstalk"
    # :material-flag-checkered: Objetivo
    Cambiar el texto de la app a **‚ÄúHola, <tu nombre>‚Äù**, **compilar** y **probar en local**, y finalmente **empaquetar** para **subir a Elastic Beanstalk (EB)**.

    !!! warning "¬øQu√© material necesitas?"
        - **Opci√≥n A (recomendada):** el **proyecto completo** (c√≥digo fuente + `pom.xml`).  
          ‚Üí Podr√°s **modificar**, **compilar** y **crear tu propio ZIP** para EB.  
        - **Opci√≥n B (limitada):** solo un **ZIP precompilado** con `Procfile` + `target/`.  
          ‚Üí **No** podr√°s cambiar el mensaje (no hay c√≥digo fuente). Pide el proyecto completo.

    ---

    ## :material-source-repository: A) Si tienes el **proyecto completo**

    ### 1) Cambia el mensaje
    Edita la clase, por ejemplo:

    ```java
    @GetMapping("/")
    public String helloWorld() {
      return "Hola, Laura!";
    }
    ```

    ### 2) Compila y prueba en local
    ```bash
    mvn clean package
    java -jar target/eb-java-demo-0.0.1-SNAPSHOT.jar
    ```

    Abre <http://localhost:8080> ‚Üí deber√≠a mostrar **Hola, <tu nombre>**.

    !!! tip "¬øNo sabes el nombre exacto del JAR?"
        Mira qu√© JAR cre√≥ Maven:
        ```bash
        ls target/*.jar
        ```
        Si es distinto, √∫salo en `java -jar ...`.

    ### 3) Empaqueta para Elastic Beanstalk
    Crea un ZIP con **exactamente**:
    - `Procfile` (en la **ra√≠z** del ZIP)
    - la carpeta `target/` con tu `.jar`

    ```bash
    zip -r java-eb-demo.zip Procfile target/
    ```

    **Procfile** (en la **ra√≠z del proyecto**):

    ```
    web: java -Dserver.port=$PORT -jar target/eb-java-demo-0.0.1-SNAPSHOT.jar
    ```

    > Si el nombre del jar cambia, actualiza esa l√≠nea, o usa esta variante robusta:

    ```
    web: bash -lc 'java -Dserver.port=$PORT -jar $(ls target/*.jar | head -n1)'
    ```

    ### 4) Sube a Elastic Beanstalk
    1. AWS Console ‚Üí **Elastic Beanstalk** ‚Üí tu **entorno** ‚Üí **Upload and deploy**.  
    2. Sube `java-eb-demo.zip`.  
    3. Espera **Health: OK** ‚Üí abre la **URL p√∫blica** ‚Üí ver√°s tu mensaje.

    ---

    ## :material-package-down: B) Si solo tienes un **ZIP precompilado**
    Con un ZIP que contiene **`Procfile` + `target/`** **no** puedes cambiar el texto: faltar√≠an los fuentes.  
    Pide el **proyecto completo** o descarga uno de ejemplo, ed√≠talo y sigue los pasos del apartado A.

    ---

    ## :material-playlist-check: Checklist r√°pido
    - [ ] Modifiqu√© el texto en el c√≥digo fuente.  
    - [ ] Compil√©: `mvn clean package` sin errores.  
    - [ ] Prob√© local: `java -jar target/<mi-jar>.jar` ‚Üí ‚ÄúHola, <mi nombre>‚Äù.  
    - [ ] Cre√© `java-eb-demo.zip` con **Procfile** + **target/**.  
    - [ ] Desplegu√© en EB y vi **Health: OK**.  

    ---

    ## :material-lifebuoy: Problemas t√≠picos y soluci√≥n

    ??? question "EB falla con 502 / Health rojo"
        - Aseg√∫rate de que el **`Procfile`** est√° en la **ra√≠z del ZIP**.  
        - Confirma que el nombre del `.jar` del `Procfile` coincide con el real.  
        - Usa la variante `bash -lc '... *.jar'` si el nombre cambia.  
        - Revisa logs en EB ‚Üí **Logs ‚Üí Request logs ‚Üí Last 100 lines**.

    ??? question "No arranca en local"
        - Comprueba la versi√≥n de Java (`java -version`) y que el JAR existe (`ls target/*.jar`).  
        - Vuelve a compilar con `mvn clean package` y mira errores de compilaci√≥n.

